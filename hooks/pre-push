#!/bin/sh
######## KTLINT-GRADLE HOOK START ########

echo "Checking Kotlin code formatting..."

./gradlew lintKotlin --daemon

status=$?

if [ "$status" -eq "0" ] ; then
  echo "✅ No formatting issues were found"
else
  echo "❌ There are code formatting issues that must be addressed"
  echo "Run './gradlew formatKotlin' to fix them automatically"
  exit 1
fi

######## KTLINT-GRADLE HOOK END ########

echo "Running tests..."

./gradlew test --daemon

status=$?

if [ "$status" -eq "0" ] ; then
  echo "✅ All tests passed"
else
  echo "❌ Some tests failed"
  exit 1
fi

echo "✅ Pre-push checks passed successfully!"

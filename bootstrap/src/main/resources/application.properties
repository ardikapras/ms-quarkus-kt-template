# Application Configuration
quarkus.application.name=ms-quarkus-kt-template

# HTTP Configuration
quarkus.http.port=8080
quarkus.http.test-port=8081

# Database Configuration
quarkus.datasource.db-kind=postgresql

# Dev mode: Let Dev Services handle the database (no URL needed)
# Prod mode: Use explicit connection details
%prod.quarkus.datasource.username=template_user
%prod.quarkus.datasource.password=template_password
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/template_db
%prod.quarkus.datasource.jdbc.max-size=16

# Hibernate Configuration
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0

# Security Configuration (JWT/OIDC)
# Disabled in dev mode - enable in production with real auth server
%dev.quarkus.oidc.enabled=false
%prod.quarkus.oidc.enabled=true
%prod.quarkus.oidc.auth-server-url=https://auth-server-url/realms/your-realm
%prod.quarkus.oidc.client-id=template-service
%prod.quarkus.oidc.credentials.secret=change-me

# Security policy for development (allow all)
%dev.quarkus.security.jaxrs.deny-unannotated-endpoints=false
%prod.quarkus.security.jaxrs.deny-unannotated-endpoints=true

# Health Check Configuration
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.liveness-path=/health/live
quarkus.smallrye-health.readiness-path=/health/ready

# Metrics Configuration
quarkus.micrometer.enabled=true
quarkus.micrometer.registry-enabled-default=true
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.jvm.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics

# OpenTelemetry Tracing Configuration
quarkus.otel.enabled=true
quarkus.otel.exporter.otlp.endpoint=http://localhost:4317
quarkus.otel.traces.sampler=always_on
quarkus.otel.service.name=ms-quarkus-kt-template

# OpenAPI/Swagger Configuration
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.title=User Management API
mp.openapi.extensions.smallrye.info.title=User Management Microservice API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=RESTful API for managing users in hexagonal architecture
mp.openapi.extensions.smallrye.info.contact.name=API Support
mp.openapi.extensions.smallrye.info.contact.email=support@example.com
mp.openapi.extensions.smallrye.info.license.name=Apache 2.0
mp.openapi.extensions.smallrye.info.license.url=https://www.apache.org/licenses/LICENSE-2.0

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."com.ardikapras.template".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# CORS Configuration (for development)
%dev.quarkus.http.cors.enabled=true
%dev.quarkus.http.cors.origins=http://localhost:3000,http://localhost:8080
%dev.quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
%dev.quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Dev Services Configuration
# Quarkus will automatically start a PostgreSQL container in dev mode
%dev.quarkus.devservices.enabled=true
%dev.quarkus.datasource.devservices.enabled=true
%dev.quarkus.datasource.devservices.image-name=postgres:16-alpine

# In production, use the configured datasource
%prod.quarkus.devservices.enabled=false

# Test Configuration - Uses Testcontainers for PostgreSQL
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.datasource.devservices.image-name=postgres:16-alpine
%test.quarkus.flyway.migrate-at-start=true
%test.quarkus.flyway.clean-at-start=true
